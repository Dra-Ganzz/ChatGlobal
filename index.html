<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chat Sederhana</title>
</head>
<body>
  <h2>ğŸ’¬ Chat</h2>
  <input id="nameInput" placeholder="Nama">
  <input id="messageInput" placeholder="Pesan">
  <button onclick="sendMessage()">Kirim</button>
  <div id="chatBox"></div>

<script>
async function sendMessage() {
  const name = document.getElementById("nameInput").value;
  const text = document.getElementById("messageInput").value;

  if (!name || !text) return alert("Nama dan pesan harus diisi!");

  await fetch("/api/send", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, text })
  });

  document.getElementById("messageInput").value = "";
}

async function loadMessages() {
  const res = await fetch("/api/messages");
  const msgs = await res.json();

  document.getElementById("chatBox").innerHTML = msgs
    .map(m => `<b>${m.name}</b>: ${m.text}`)
    .join("<br>");
}

setInterval(loadMessages, 2000);
loadMessages();
</script>
</body>
</html>
